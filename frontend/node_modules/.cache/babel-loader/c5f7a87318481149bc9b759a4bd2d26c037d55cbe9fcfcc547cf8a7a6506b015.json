{"ast":null,"code":"\"use client\";import{createContext,useState,useContext,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>useContext(AuthContext);export const AuthProvider=_ref=>{let{children}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Check if user is logged in\nconst checkAuthStatus=async()=>{try{const token=localStorage.getItem(\"token\");if(token){axios.defaults.headers.common[\"Authorization\"]=`Bearer ${token}`;const response=await axios.get(\"http://localhost:5000/api/auth/verify\");setUser(response.data.user);setIsAuthenticated(true);}}catch(error){localStorage.removeItem(\"token\");delete axios.defaults.headers.common[\"Authorization\"];}setLoading(false);};checkAuthStatus();},[]);const login=async(email,password)=>{try{const response=await axios.post(\"http://localhost:5000/api/auth/login\",{email,password});const{token,user}=response.data;localStorage.setItem(\"token\",token);axios.defaults.headers.common[\"Authorization\"]=`Bearer ${token}`;setUser(user);setIsAuthenticated(true);return true;}catch(error){return false;}};const signup=async(name,email,password)=>{try{const response=await axios.post(\"http://localhost:5000/api/auth/signup\",{name,email,password});const{token,user}=response.data;localStorage.setItem(\"token\",token);axios.defaults.headers.common[\"Authorization\"]=`Bearer ${token}`;setUser(user);setIsAuthenticated(true);return true;}catch(error){return false;}};const logout=()=>{localStorage.removeItem(\"token\");delete axios.defaults.headers.common[\"Authorization\"];setUser(null);setIsAuthenticated(false);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isAuthenticated,user,login,signup,logout,loading},children:children});};","map":{"version":3,"names":["createContext","useState","useContext","useEffect","axios","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","checkAuthStatus","token","localStorage","getItem","defaults","headers","common","response","get","data","error","removeItem","login","email","password","post","setItem","signup","name","logout","Provider","value"],"sources":["D:/CEP_Project/AgroNeo/frontend/src/context/AuthContext.js"],"sourcesContent":["\"use client\"\n\nimport { createContext, useState, useContext, useEffect } from \"react\"\nimport axios from \"axios\"\n\nconst AuthContext = createContext()\n\nexport const useAuth = () => useContext(AuthContext)\n\nexport const AuthProvider = ({ children }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [user, setUser] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // Check if user is logged in\n    const checkAuthStatus = async () => {\n      try {\n        const token = localStorage.getItem(\"token\")\n\n        if (token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n          const response = await axios.get(\"http://localhost:5000/api/auth/verify\")\n          setUser(response.data.user)\n          setIsAuthenticated(true)\n        }\n      } catch (error) {\n        localStorage.removeItem(\"token\")\n        delete axios.defaults.headers.common[\"Authorization\"]\n      }\n\n      setLoading(false)\n    }\n\n    checkAuthStatus()\n  }, [])\n\n  const login = async (email, password) => {\n    try {\n      const response = await axios.post(\"http://localhost:5000/api/auth/login\", {\n        email,\n        password,\n      })\n\n      const { token, user } = response.data\n      localStorage.setItem(\"token\", token)\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n\n      setUser(user)\n      setIsAuthenticated(true)\n      return true\n    } catch (error) {\n      return false\n    }\n  }\n\n  const signup = async (name, email, password) => {\n    try {\n      const response = await axios.post(\"http://localhost:5000/api/auth/signup\", {\n        name,\n        email,\n        password,\n      })\n\n      const { token, user } = response.data\n      localStorage.setItem(\"token\", token)\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n\n      setUser(user)\n      setIsAuthenticated(true)\n      return true\n    } catch (error) {\n      return false\n    }\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"token\")\n    delete axios.defaults.headers.common[\"Authorization\"]\n    setUser(null)\n    setIsAuthenticated(false)\n  }\n\n  return (\n    <AuthContext.Provider value={{ isAuthenticated, user, login, signup, logout, loading }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}